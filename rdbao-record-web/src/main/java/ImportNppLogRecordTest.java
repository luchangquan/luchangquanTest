import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.util.ArrayList;
import java.util.List;

import com.alibaba.fastjson.JSONObject;
import com.renke.rdbao.util.Detect;

public class ImportNppLogRecordTest {
	public static void main(String[] args) throws UnsupportedEncodingException, FileNotFoundException {

		String[] ps = "17788599618,17788599510,17788599363,17788599319,17788599367,17788599309,17788599680,17788599579,13429665203,17788599505,17788599573,17788599327,17788599570,17788599603,17788599659,17788599313,17788599708,17788599520,17788599533,13777580172,17788599358,17788599672,17788599701,13116788552,17788599356,17788599368,17788599637,13071830003,17788599502,17788599697,17788599399,17788599703,17788599650,17788599635,17788599531,17788599671,17788599515,17788599528,17788599375,17788599303,17788599377,17788599639,15858282971,17788599670,17788599591,17788599682,13575463201,17788599366,17788599598,17788599538,17788599321,17788599576,17788599581,17788599315,17788599331,17788599330,17788599526,17788599660,17788599391,17788599360,057163705411,057163705411,17788599628,17788599523,17788599687,17788599600,17788599351,17788599513,17788599397,13067837678,17788599307,17788599686,13858176520,17788599679,17788599503,17788599378,17788599379,17788599667,17788599306,17788599702,17788599652,13666684052,17788599677,17788599396,13157113505,17788599310,17788599566,17788599532,17788599370,17788599695,17788599550,17788599322,17788599512,17788599383,057161067907,17788599578,17788599661,17788599335,18958139187,17788599568,17788599317,17788599685,17788599676,17788599681,17788599336,17788599665,17788599392,17788599698,17788599575,17788599571,17788599678,17788599561,17788599651,17788599653,17788599559,15988113521,17788599656,13806507406,17788599657,17788599707,17788599395,17788599553,17788599668,17788599587,17788599332,17788599328,15158130724,17788599511,17788599577,17788599583,17788599700,17788599699,17788599369,057161100135,057161100135,17788599560,17788599312,17788599320,17788599565,13588238048,17788599382,13858190614,17788599371,17788599597,17788599536,17788599658,17788599706,057163795400,17788599593,17788599387,13666692000,17788599675,17788599398,17788599610,17788599316,17788599608,17788599638,15158029443,057163669730,057163669730,13588229006,17788599607,17788599507,17788599326,17788599606,17788599595,17788599582,17788599350,17788599551,17788599567,17788599673,17788599663,17788599539,17788599558,17788599390,17788599693,17788599372,13305718661,17788599557,17788599633,17788599521,17788599636,17788599308,17788599509,17788599353,17788599311,17788599508,057123662791,057123662791,13588233566,17788599552,15058143749,15858289127,13858062798,17788599605,17788599689,17788599592,17788599305,17788599359,17788599318,15888857789,057163710083,057163710083,17788599385,17788599376,17788599339,17788599380,13615812838,17788599601,17788599381,17788599590,17788599522,17788599389,17788599596,17788599535,15967188100,17788599517,17788599501,17788599690,17788599569,17788599589,17788599362,057158688111,057158688111,17788599529,17788599329,057161084411,057161084411,17788599355,17788599696,17788599563,17788599357,13216127508,17788599580,17788599338,17788599655,17788599337,17788599669,17788599506,15700193729,17788599602,17788599585,13116719898,13385819297,13385819297,17788599537,13819136687,17788599500,17788599525,17788599301,17788599302,057163888912,057163888912,17788599562,17788599516,17788599352,17788599519,17788599325,17788599323,057163723063,17788599556,13282820433,17788599365,17788599361,17788599662,13506815520,17788599572,17788599609,17788599691,17788599527,17788599586,057163741811,057163741811,17788599683,13738039664,17788599530,17788599692,17788599705,17788599393,17788599386,13857165651,17788599373"
				.split(",");

		File f = new File("/Users/guoshunjiang/Desktop/ftp/log.log_20170519.txt");

		BufferedReader reader = new BufferedReader(new InputStreamReader(new FileInputStream(f), "UTF-8"));
		String line = null;
		List<String> fs = new ArrayList<String>();
		try {
			while ((line = reader.readLine()) != null) {
				String patt = "证据处理接口请求参数--------->";
				String value = "";
				if (line.contains(patt)) {
					// System.out.println(line);
					if (line.split(patt).length < 2) {
						continue;
					}
					value = line.split(patt)[1].trim();
					// value = value.substring(0, value.length() - 1).trim();
					JSONObject vj = JSONObject.parseObject(value);
					String callingNumber = vj.getString("CallingNumber");
					String calledNumber = vj.getString("CalledNumber");

					if (Detect.notEmpty(calledNumber) && Detect.notEmpty(callingNumber)) {
						for (String p : ps) {
							if (p.trim().equals(callingNumber.trim()) || p.trim().equals(calledNumber.trim())) {
								fs.add(vj.toJSONString());
								break;
							}
						}
					}

				}

			}
			System.out.println(fs.size());
			for (String fq : fs) {
				System.out.println(fq);
			}

		} catch (IOException e) {
		} finally {
			try {
				reader.close();
			} catch (IOException e) {
			}
		}
	}

}
